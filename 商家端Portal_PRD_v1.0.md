# 商家端 Portal 产品需求文档

**Voice Agent 语音点餐系统 - 商户管理后台**

| 项目 | 内容 |
|------|------|
| 文档版本 | V1.0 |
| 创建日期 | 2025年12月21日 |
| 产品负责人 | Annan |
| 文档状态 | 待评审 |

---

## 1. 产品概述

### 1.1 背景

随着语音 Agent 点餐系统的商业化推进，需要为合作商家提供一个管理后台（Portal），使商家能够查看订单情况、管理财务数据、并进行相关的业务操作。该 Portal 将作为商家与平台交互的核心工具，直接影响商家的合作体验和运营效率。

### 1.2 目标用户

- 合作餐馆老板及管理人员
- 主要集中在北美地区（美国、加拿大）的中餐厅
- 部分用户可能为家族式经营的小型餐馆

### 1.3 产品形态

第一期采用 Web 页面形式，后续根据业务发展可考虑开发混合 APP（如 Flutter/PWA）。

---

## 2. 功能需求

### 2.1 账号与登录管理

#### 2.1.1 功能描述

商家账号由平台统一创建和管理，不支持商家自行注册。每个商家账号需要经过业务经理对接后才能开通，以确保合作信息的完整性和准确性。

#### 2.1.2 功能要点

1. **账号创建**：仅由平台后台创建，商家无自助注册入口
2. **业务经理对接**：商家合作前需与业务经理完成 Onboarding 流程，包括餐馆信息录入、财务账户绑定等
3. **登录方式**：支持账号密码登录（后续可扩展手机号/邮箱验证码登录）
4. **账号权限**：一个商家账号对应一家餐馆

---

### 2.2 餐馆基本信息

#### 2.2.1 功能描述

商家登录后可查看自身餐馆的基本信息，了解当前合作状态和配置情况。

#### 2.2.2 信息展示

| 字段名称 | 说明 |
|----------|------|
| 餐馆名称 | 商家店铺名称 |
| 餐馆地址 | 商家经营地址 |
| 联系电话 | 商家联系方式 |
| 配送模式 | 当前配送方式（Uber配送/商家自配/混合） |
| 合作状态 | 合作中 / 暂停 / 已终止 |
| 入驻时间 | 开始合作的日期 |

---

### 2.3 订单管理模块

#### 2.3.1 功能描述

商家可查看通过语音 Agent 系统产生的所有订单，包括订单详情、状态、支付信息等，并可进行订单操作。

#### 2.3.2 订单列表

1. **默认排序**：按订单创建日期倒序排列（最新订单在前）
2. **搜索功能**：支持按订单号、客户电话号码、日期范围进行搜索
3. **筛选功能**：按订单状态（未完成/已完成/已取消）、配送方式（Delivery/Pickup）筛选
4. **数据导出**：支持将订单数据导出为 Excel/CSV 格式

#### 2.3.3 订单详情字段

| 字段名称 | 说明 | 来源 |
|----------|------|------|
| 订单号 | 系统生成的唯一订单标识 | 系统自动生成 |
| 客户电话 | 下单客户的联系电话 | 语音 Agent 采集 |
| 订单类型 | Delivery（配送）/ Pickup（自取） | 语音 Agent 采集 |
| 菜品明细 | 订单包含的菜品及数量 | 语音 Agent 采集 |
| 菜品小计 | 菜品总金额（Subtotal） | 系统计算 |
| 配送费 | Delivery Fee（仅配送订单） | Uber API 返回 |
| 税费 | Tax 税额 | 系统计算 |
| 小费 | Tips（给配送员的小费） | 用户选择 |
| 订单总额 | 用户实际支付金额 | 系统计算 |
| 支付方式 | 信用卡 / 现金 | 语音 Agent 采集 |
| 支付状态 | 已支付 / 待支付 / 支付失败 | 支付平台回调 |
| 配送地址 | 客户收货地址（仅配送订单） | 用户填写 |
| 订单状态 | 进行中 / 已完成 / 已取消 | 系统状态 |
| 创建时间 | 订单创建时间 | 系统记录 |

#### 2.3.4 订单操作

针对未完成订单，商家可进行以下操作：

- **取消订单**：取消当前订单（需记录取消原因）
- **修改订单**：对订单内容进行调整（如菜品数量）
- **完成订单**：标记订单为已完成

---

### 2.4 财务模块

#### 2.4.1 功能描述

商家可查看财务数据统计，了解收入情况，并进行提现操作。这是商家最关心的核心模块之一。

#### 2.4.2 财务数据统计

| 统计指标 | 说明 |
|----------|------|
| 订单数量 | 指定周期内的订单总数 |
| 订单总金额 | 指定周期内所有订单的总金额 |
| 配送费支出 | 平台代付的 Uber 配送费用总额 |
| 平台服务费 | 平台收取的服务费用 |
| 应结算金额 | 扣除各项费用后应打款给商家的金额 |
| 已结算金额 | 已成功打款给商家的金额 |
| 待结算金额 | 尚未打款的金额 |

#### 2.4.3 统计周期

支持以下时间维度查看财务数据：

- 本日 / 本周 / 本月
- 自定义日期范围

#### 2.4.4 打款/提现

1. **打款方式**：通过 ACH 转账至商家绑定的银行账户
2. **打款周期**：待与商家签约时确定（如周结/月结）
3. **账户绑定**：商家需在 Onboarding 阶段提供银行账户信息
4. **打款记录**：显示历史打款记录，包括打款日期、金额、状态

---

## 3. 后台控制功能（平台侧）

以下功能由平台后台控制，不在商家 Portal 中暴露，但会影响商家端的显示和业务逻辑：

### 3.1 配送模式控制

平台可为每个商家设置配送模式，支持三种方式：

| 配送模式 | 说明 |
|----------|------|
| 纯 Uber 配送 | 所有配送订单均通过 Uber Delivery 完成 |
| 纯商家自配送 | 商家使用自有配送人员，配送费为 0，用户仅需支付小费 |
| 混合模式 | 根据配送范围自动判断，范围内商家自配，超出范围调用 Uber |

---

## 4. 第二期功能规划（预留）

以下功能不在 MVP 版本中实现，但需在架构设计时预留扩展空间：

### 4.1 配送范围设置

针对采用「混合模式」或「商家自配送」的商家，需要设置自配送的覆盖范围：

1. **地图框选**：商家在地图上框选自配送区域（推荐）
2. **半径设置**：以餐馆为中心，设置配送半径（简化方案）
3. **Zipcode 设置**：指定可配送的 Zipcode 列表

**注意事项**：需考虑复杂地理情况（如河流、桥梁导致的实际路程远大于直线距离），可参考国内外卖平台的解决方案。

### 4.2 通话记录查询

用于责任追溯和问题排查：

- 支持按电话号码或订单号搜索
- 显示完整的语音 Agent 对话上下文
- 用于确认订单内容是否为 AI 识别错误或商家执行错误

### 4.3 商家端 APP

当业务量达到一定规模后，可考虑开发移动端 APP（Flutter/PWA 混合方案），提供更便捷的移动端管理体验。

---

## 5. 非功能性需求

### 5.1 性能要求

- 页面加载时间 < 3 秒
- 订单列表支持分页加载，避免大数据量卡顿

### 5.2 兼容性要求

- 支持主流浏览器（Chrome、Safari、Edge）
- 支持移动端浏览器访问（响应式布局）

### 5.3 安全要求

- HTTPS 加密传输
- 敏感数据（银行账户等）加密存储
- 登录状态有效期控制

---

## 6. UI/UX 设计建议

- **简洁清晰**：考虑到部分用户可能年龄较大或不熟悉电脑操作，界面应简洁直观
- **数据可视化**：财务模块可采用图表展示，便于快速了解经营状况
- **多语言支持**：优先支持中文和英文
- **状态提示**：关键操作需有明确的成功/失败提示

---

## 7. 优先级与时间规划

| 优先级 | 功能模块 | 备注 |
|--------|----------|------|
| P0 | 订单管理（列表、详情、操作） | 商家核心诉求 |
| P0 | 财务模块（统计、打款记录） | 商家核心诉求 |
| P1 | 餐馆基本信息展示 | 基础信息 |
| P1 | 账号登录管理 | 系统基础 |
| P2 | 配送范围设置 | 第二期 |
| P2 | 通话记录查询 | 第二期 |
| P3 | 移动端 APP | 业务规模化后 |

---

## 8. 待确认事项

- 打款周期：与商家签约时确定是周结还是月结
- 平台服务费率：需要与业务侧确认具体收费比例
- 商家自配送半径：默认值设为多少麦合适（建议 5 麦）
- 隐私政策：是否需要在 Portal 中展示用户数据使用说明

---

## 附录：术语说明

| 术语 | 说明 |
|------|------|
| Voice Agent | 语音点餐 AI 系统，通过电话自动接收客户订单 |
| Delivery | 配送，由骑手将餐品送至客户地址 |
| Pickup | 自取，客户到店自行取餐 |
| ACH | Automated Clearing House，美国银行间电子转账系统 |
| Onboarding | 商家入驻流程，包括信息录入、账户绑定等 |
